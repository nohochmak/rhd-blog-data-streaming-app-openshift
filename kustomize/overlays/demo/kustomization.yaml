apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../../base

configMapGenerator:
- name: my-demo-config
  literals:
    - MY_NAMESPACE=banderle1-dev
    - MY_SANDBOX_ID=banderle1

secretGenerator:
- name: mastodon-api
  literals:
    - access-token=sha256~5lmywtv_8j0kuo3m-0Qyy0CXlpa77p-M33k9S_JlToE

vars:
- name: MY_NAMESPACE
  objref:
    kind: ConfigMap
    name: my-demo-config
    apiVersion: v1
  fieldref:
    fieldpath: data.MY_NAMESPACE
- name: MY_SANDBOX_ID
  objref:
    kind: ConfigMap
    name: my-demo-config
    apiVersion: v1
  fieldref:
    fieldpath: data.MY_SANDBOX_ID

patchesStrategicMerge:
  - emoji-tracker.yaml
  - emoji-dashboard.yaml

configurations:
  - transformer_config.yaml

generatorOptions:
  disableNameSuffixHash: true
